(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{457:function(t,a,s){"use strict";s.r(a);var v=s(2),_=Object(v.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"为什么需要dns解析域名为ip地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#为什么需要dns解析域名为ip地址"}},[t._v("#")]),t._v(" 为什么需要DNS解析域名为IP地址?")]),t._v(" "),a("p",[t._v("网络通讯大部分是基于TCP/IP的，而TCP/IP是基于IP地址的，所以计算机在网络上进行通讯时只能识别如“202.96.134.133”之类的IP地址，而不能认识域名。我们无法记住10个以上IP地址的网站，所以我们访问网站时，更多的是在浏览器地址栏中输入域名，就能看到所需要的页面，这是因为有一个叫“DNS服务器”的计算机自动把我们的域名“翻译”成了相应的IP地址，然后调出IP地址所对应的网页。")]),t._v(" "),a("h2",{attrs:{id:"什么是dns"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是dns"}},[t._v("#")]),t._v(" 什么是DNS")]),t._v(" "),a("p",[t._v("DNS( Domain Name System)是“域名系统”的英文缩写，是一种组织成域层次结构的计算机和网络服务命名系统，它用于TCP/IP网络，它所提供的服务是用来将主机名和域名转换为IP地址的工作。DNS就是这样的一位“翻译官”，它的基本工作原理可用下图来表示:")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://pic1.zhimg.com/80/e5143bc08d4ec9d7f210522c7e540f4d_1440w.jpg?source=1940ef5c",alt:"img"}})]),t._v(" "),a("h2",{attrs:{id:"dns的解析过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dns的解析过程"}},[t._v("#")]),t._v(" DNS的解析过程")]),t._v(" "),a("p",[t._v("DNS是应用层协议，事实上他是为其他应用层协议工作的，包括不限于HTTP和SMTP以及FTP，用于将用户提供的主机名解析为ip地址。")]),t._v(" "),a("p",[t._v("具体过程:")]),t._v(" "),a("ol",[a("li",[t._v("用户主机上运行着DNS的客户端，比如我们的PC机或者手机客户端")]),t._v(" "),a("li",[t._v("浏览器将接收到的url中抽取出域名字段，就是访问的主机名，比如:"),a("code",[t._v("http://www.baidu.com/")]),t._v(", 并将这个主机名传送给DNS应用的客户端")]),t._v(" "),a("li",[t._v("DNS客户机端向DNS服务器端发送一份查询报文，报文中包含着要访问的主机名字段（中间包括一些列缓存查询以及分布式DNS集群的工作)")]),t._v(" "),a("li",[t._v("DNS客户机最终会收到一份回答报文，其中包含有该主机名对应的IP地址")]),t._v(" "),a("li",[t._v("一旦该浏览器收到来自DNS的IP地址，就可以向该IP地址定位的HTTP服务器发起TCP连接")])]),t._v(" "),a("h2",{attrs:{id:"dns查询过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dns查询过程"}},[t._v("#")]),t._v(" DNS查询过程")]),t._v(" "),a("h3",{attrs:{id:"查询过程简述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询过程简述"}},[t._v("#")]),t._v(" 查询过程简述")]),t._v(" "),a("ol",[a("li",[t._v("首先搜索浏览器自身的DNS缓存,如果存在，则域名解析到此完成。")]),t._v(" "),a("li",[t._v("如果浏览器自身的缓存里面没有找到对应的条目，那么会尝试读取操作系统的hosts文件看是否存在对应的映射关系,如果存在，则域名解析到此完成。")]),t._v(" "),a("li",[t._v("如果本地hosts文件不存在映射关系，则查找本地DNS服务器(ISP服务器,或者自己手动设置的DNS服务器),如果存在,域名到此解析完成。")]),t._v(" "),a("li",[t._v("如果本地DNS服务器还没找到的话,它就会向根服务器发出请求,进行递归查询。")])]),t._v(" "),a("h3",{attrs:{id:"查询过程原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询过程原理"}},[t._v("#")]),t._v(" 查询过程原理")]),t._v(" "),a("p",[t._v("工具软件"),a("code",[t._v("dig")]),t._v("可以显示整个查询过程。")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dig")]),t._v(" math.stackexchange.com\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"/img/bg2016061501.png",alt:"image-20210721192726657"}})]),t._v(" "),a("ol",[a("li",[t._v("第一段是查询参数和统计。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/bg2016061502.png",alt:"bg2016061502"}})]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("第二段是查询内容。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/bg2016061503.png",alt:"bg2016061503"}})]),t._v(" "),a("p",[t._v("上面结果表示，查询域名"),a("code",[t._v("math.stackexchange.com")]),t._v("的"),a("code",[t._v("A")]),t._v("记录，"),a("code",[t._v("A")]),t._v("是address的缩写。")]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("第三段是DNS服务器的答复。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/bg2016061504.png",alt:"bg2016061504"}})]),t._v(" "),a("p",[t._v("上面结果显示，"),a("code",[t._v("math.stackexchange.com")]),t._v("有四个"),a("code",[t._v("A")]),t._v("记录，即四个IP地址。"),a("code",[t._v("600")]),t._v("是TTL值（Time to live 的缩写），表示缓存时间，即600秒之内不用重新查询。")]),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[t._v("第四段显示"),a("code",[t._v("stackexchange.com")]),t._v("的NS记录（Name Server的缩写），即哪些服务器负责管理"),a("code",[t._v("stackexchange.com")]),t._v("的DNS记录。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/bg2016061505.png",alt:"bg2016061505"}})]),t._v(" "),a("p",[t._v("上面结果显示"),a("code",[t._v("stackexchange.com")]),t._v("共有四条NS记录，即四个域名服务器，向其中任一台查询就能知道"),a("code",[t._v("math.stackexchange.com")]),t._v("的IP地址是什么。")]),t._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[t._v("第五段是上面四个域名服务器的IP地址，这是随着前一段一起返回的。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/bg2016061506.png",alt:"bg2016061506"}})]),t._v(" "),a("ol",{attrs:{start:"6"}},[a("li",[t._v("第六段是DNS服务器的一些传输信息。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/img/bg2016061514.png",alt:"bg2016061514"}})]),t._v(" "),a("p",[t._v("上面结果显示，本机的DNS服务器是"),a("code",[t._v("192.168.1.253")]),t._v("，查询端口是53（DNS服务器的默认端口），以及回应长度是305字节。")])])}),[],!1,null,null,null);a.default=_.exports}}]);