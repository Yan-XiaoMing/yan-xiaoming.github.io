(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{473:function(t,e,_){"use strict";_.r(e);var o=_(2),r=Object(o.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"为什么需要-websocket"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#为什么需要-websocket"}},[t._v("#")]),t._v(" 为什么需要 websocket")]),t._v(" "),e("p",[t._v("我们已经有了 HTTP 为什么还需要 Websocket?")]),t._v(" "),e("p",[t._v("Http 协议有一个缺陷: 通信只能由客户端来发起")]),t._v(" "),e("p",[t._v("比如: 我们想了解今天的天气，只能是客户端向服务器发出请求，服务器返回查询结果。HTTP 协议做不到服务器主动向客户端推送信息。")]),t._v(" "),e("p",[t._v("这种单向请求的特点，注定了如果服务器有连续的状态变化，客户端要获知就非常麻烦。我们只能使用"),e("a",{attrs:{href:"https://www.pubnub.com/blog/2014-12-01-http-long-polling/",target:"_blank",rel:"noopener noreferrer"}},[t._v('"轮询"'),e("OutboundLink")],1),t._v("：每隔一段时候，就发出一个询问，了解服务器有没有新的信息。最典型的场景就是聊天室。")]),t._v(" "),e("p",[t._v("轮询的效率低，非常浪费资源（因为必须不停连接，或者 HTTP 连接始终打开）。")]),t._v(" "),e("p",[t._v("WebSocket 就是这样发明的。")]),t._v(" "),e("h2",{attrs:{id:"什么是-websocket"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是-websocket"}},[t._v("#")]),t._v(" 什么是 websocket")]),t._v(" "),e("p",[e("a",{attrs:{href:"http://websocket.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("WebSocket"),e("OutboundLink")],1),t._v(" 是一种网络通信协议，就像 HTTP 一样都是协议的一种。同样的“WebSocket”是一种基于 TCP 的轻量级网络通信协议，在地位上是与 HTTP“平级”的。")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://www.ruanyifeng.com/blogimg/asset/2017/bg2017051502.png",alt:"img"}})]),t._v(" "),e("p",[e("strong",[t._v("websocket 的特点")])]),t._v(" "),e("p",[t._v("（1）建立在 TCP 协议之上，服务器端的实现比较容易。")]),t._v(" "),e("p",[t._v("（2）与 HTTP 协议有着良好的兼容性。默认端口也是 80 和 443，并且握手阶段采用 HTTP 协议，因 此握手时不容易屏蔽，能通过各种 HTTP 代理服务器。")]),t._v(" "),e("p",[t._v("（3）数据格式比较轻量，性能开销小，通信高效。")]),t._v(" "),e("p",[t._v("（4）可以发送文本，也可以发送二进制数据。")]),t._v(" "),e("p",[t._v("（5）没有同源限制，客户端可以与任意服务器通信。")]),t._v(" "),e("p",[t._v("（6）协议标识符是"),e("code",[t._v("ws")]),t._v("（如果加密，则为"),e("code",[t._v("wss")]),t._v("），服务器网址就是 URL。")])])}),[],!1,null,null,null);e.default=r.exports}}]);